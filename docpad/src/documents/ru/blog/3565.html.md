---
layout: post
title: 'Хранение обработки в Lab в файле RGB'
date: Jun 15, 2009
tags:
  - photography
---

Александр Онищенко [на семинаре](http://birdwatcher.ru/blog/3560/ "Семинар «Съёмка и обработка пейзажа» Александра Онищенко") открыл для меня великую вещь (хотя вообще-то я мог бы и сам догадаться) — возможность хранить обработку в пространстве Lab в файле RGB, вместе со всеми остальными правками. Однако он предложил довольно геморройный способ. Как оказалось, можно сделать проще и удобнее.

<!--more-->

Предложенный Александром способ примерно такой:

1. Сохраняем текущее состояние документа в снапшоте.
2. Переводим в Lab.
3. Делаем нужную обработку.
4. Сохраняем параметры в файл (если нужно).
5. Сводим слои.
6. Копируем результат в буфер обмена.
7. Восстанавливаем снапшот.
8. Вставляем результат из буфера на отдельный слой.

Снапшот делать в общем-то не обязательно, можно просто создавать копию документа, а потом перетаскивать сведённый слой обратно.

Более простой способ основан на хранении Lab-обработки в смарт-объекте. Смарт-объект — это как бы слой, с которым можно делать что угодно, но внутри которого лежит PSD-файл (на самом деле PSB, но это не важно), который в любой момент можно изменить.

Итак.

1. Создаём слой со сведёнными слоями (стоя на верхнем слое нажимаем Ctrl+Shift+Alt+E).
2. Переводим слой в смарт-объект. Из контекстного меню слоя выбираем Convert to Smart Object.
3. Дважды кликаем по слою. Смарт-объект откроется как отдельный документ.
4. Переводим документ в пространство Lab, делаем обработку (например, добавляем корректирующий слой кривых).
5. Закрываем документ, сохраняя изменения.

![lab-05.png](upload://lab-05.png)

Вот и всё. Теперь кривые в любой момент можно будет подкрутить и вся обработка фотографии будет храниться в одном файле. Это, конечно, не корректирующий слой — при изменении нижних слоёв придётся менять «подложку», т. е. сведённый слой. Но уже что-то.

Единственные недостатки такого метода — некоторая тормознутость при переходе из основного документа в смарт-объект и обратно и сильно увеличивающийся объём файла.

Исходный файл: 124 МБ.
Файл со смарт-объектом: 302 МБ.
Файл с обычным слоем (и корректирующим слоем кривых): 178 МБ.
Смарт-объект, сохранённый в отдельный файл: 123 МБ.
